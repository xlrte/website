name: Release Documentation
on: [push]
jobs:
  build-and-release-website:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          path: main
      - name: Checkout website repo
        uses: actions/checkout@v2
        with:
          repository: xlrte/xlrte.github.io
          path: web
      - name: Deploy website
        run: |
          ls -ltr
          cd main
          npm install -g yarn
          yarn
          yarn build
          cd ../web
          mv .git ../
          rm -rf *
          mv ../.git .
          cp -r ../main/build/* .
          ls -ltr
          git config --global user.email "ci@xlrte.dev"
          git config --global user.name "xlrte.dev CI"
          git add --all
          git commit -m "auto-commited by xlrte/website"
          git push origin main
