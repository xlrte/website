name: Release Documentation
on: [push]
jobs:
  build-and-release-website:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
        with:
          path: main
      - name: Checkout website repo
        uses: actions/checkout@v2
        with:
          repository: xlrte/xlrte.github.io
          path: xlrte.github.io
      - name: Deploy website
        run: |
          ls -ltr
          cd main
          npm install -g yarn
          yarn
          yarn build
          cd ../xlrte.github.io
          find . -path ./.git -prune -o -exec rm -rf {} \; 2> /dev/null
          git add .
          git commit -m "Automatic publish from github.com/xlrte/website"
          git push origin main